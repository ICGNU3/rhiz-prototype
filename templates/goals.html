{% extends "base.html" %}

{% block title %}Goals - Rhiz{% endblock %}

{% block content %}
<div class="container mt-4">
    <!-- Modern Header -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="glass-card p-4">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h1 class="h2 mb-1 gradient-text">Your Goals</h1>
                        <p class="text-muted mb-0">Define objectives and connect with the right people</p>
                    </div>
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addGoalModal">
                        <i class="bi bi-plus-lg me-2"></i>Create Goal
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Goals List -->
    <div class="row">
        {% if goals %}
            {% for goal in goals %}
                <div class="col-lg-6 mb-4">
                    <div class="glass-card h-100 p-4">
                            <div class="d-flex justify-content-between align-items-start mb-3">
                                <h5 class="card-title mb-1">
                                    <i class="bi bi-bullseye me-2 text-primary"></i>
                                    {{ goal.title }}
                                </h5>
                                {% if goal.embedding %}
                                    <span class="badge bg-success">
                                        <i class="bi bi-robot me-1"></i>AI Ready
                                    </span>
                                {% else %}
                                    <span class="badge bg-warning">
                                        <i class="bi bi-exclamation-triangle me-1"></i>Processing
                                    </span>
                                {% endif %}
                            </div>
                            
                            <p class="card-text text-muted mb-3">{{ goal.description }}</p>
                            
                            <div class="d-flex justify-content-between align-items-center mt-auto pt-3 border-top">
                                <small class="text-muted">
                                    <i class="bi bi-calendar me-1"></i>
                                    Created {{ goal.created_at[:10] }}
                                </small>
                                
                                {% if goal.embedding %}
                                    <a href="/match_goal/{{ goal.id }}" class="btn btn-primary btn-sm">
                                        <i class="bi bi-search me-1"></i>Find Matches
                                    </a>
                                {% else %}
                                    <button class="btn btn-secondary btn-sm" disabled>
                                        <i class="bi bi-hourglass-split me-1"></i>Processing...
                                    </button>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="col-12">
                <div class="card">
                    <div class="card-body text-center py-5">
                        <i class="bi bi-target display-1 text-muted mb-4"></i>
                        <h4 class="text-muted mb-3">No Goals Yet</h4>
                        <p class="text-muted mb-4">Create your first goal to start getting AI-powered contact suggestions.</p>
                        <button type="button" class="btn btn-primary btn-lg" data-bs-toggle="modal" data-bs-target="#addGoalModal">
                            <i class="bi bi-plus-lg me-2"></i>Create Your First Goal
                        </button>
                    </div>
                </div>
            </div>
        {% endif %}
    </div>

    <!-- Tips Section -->
    {% if goals %}
    <div class="row mt-5">
        <div class="col-12">
            <div class="card border-info">
                <div class="card-header bg-info text-white">
                    <h6 class="mb-0">
                        <i class="bi bi-lightbulb me-2"></i>
                        Tips for Better AI Matching
                    </h6>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4">
                            <h6 class="text-info">Be Specific</h6>
                            <p class="small text-muted">Include details about what you're looking for, timeline, and any specific requirements.</p>
                        </div>
                        <div class="col-md-4">
                            <h6 class="text-info">Add Context</h6>
                            <p class="small text-muted">Mention your industry, stage, and what kind of help or connections you need.</p>
                        </div>
                        <div class="col-md-4">
                            <h6 class="text-info">Update Contacts</h6>
                            <p class="small text-muted">Keep contact notes detailed and current for better AI suggestions.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endif %}
</div>

<!-- Add Goal Modal -->
<div class="modal fade" id="addGoalModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="bi bi-plus-circle me-2"></i>Create New Goal
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            
            <form action="/create_goal" method="POST">
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="title" class="form-label">Goal Title *</label>
                        <input type="text" class="form-control" id="title" name="title" required placeholder="e.g., Raise Series A funding">
                    </div>
                    
                    <div class="mb-3">
                        <label for="description" class="form-label">Detailed Description *</label>
                        <textarea class="form-control" id="description" name="description" rows="5" required placeholder="Describe your goal in detail. Include specifics about what you're looking for, timeline, amount (if applicable), industry focus, etc. The more detail, the better AI can match you with relevant contacts."></textarea>
                        <div class="form-text">Be as specific as possible. AI uses this to find the most relevant contacts.</div>
                    </div>
                    
                    <!-- Example Goals -->
                    <div class="mb-3">
                        <h6 class="text-muted">Example Goals:</h6>
                        <div class="small text-muted">
                            <div class="mb-1">• "Raise $2M seed round for our B2B SaaS platform serving logistics companies"</div>
                            <div class="mb-1">• "Find a technical co-founder with AI/ML expertise for healthcare startup"</div>
                            <div class="mb-1">• "Get introductions to potential enterprise customers in fintech"</div>
                        </div>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="bi bi-robot me-1"></i>Create Goal & Generate AI Matches
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
