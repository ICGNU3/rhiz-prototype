{% extends "mobile_base.html" %}

{% block title %}Add Goal - Founder Network AI{% endblock %}

{% block content %}
<div class="container-fluid py-3">
    <div class="row">
        <div class="col-12">
            <div class="d-flex align-items-center mb-3">
                <button class="btn btn-link p-0 me-3" onclick="window.history.back()">
                    <i class="bi bi-arrow-left" style="font-size: 1.5rem;"></i>
                </button>
                <h4 class="mb-0">Add New Goal</h4>
            </div>
            
            <form method="POST" action="/create-goal" class="offline-support">
                <div class="card">
                    <div class="card-body">
                        <div class="mb-3">
                            <label for="title" class="form-label">Goal Title *</label>
                            <input type="text" class="form-control" id="title" name="title" required 
                                   placeholder="e.g., Raise Series A funding">
                        </div>
                        
                        <div class="mb-4">
                            <label for="description" class="form-label">Goal Description *</label>
                            <textarea class="form-control" id="description" name="description" rows="5" required
                                      placeholder="Describe your goal in detail. Include what you're looking for, timeline, specific requirements, and any other relevant context that will help match you with the right contacts."></textarea>
                            <div class="form-text">Detailed descriptions help our AI find the best matching contacts</div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Goal Type</label>
                            <div class="btn-group-vertical d-grid gap-2" role="group">
                                <input type="radio" class="btn-check" name="goal_type" id="funding" value="funding" checked>
                                <label class="btn btn-outline-primary text-start" for="funding">
                                    <i class="bi bi-cash-stack me-2"></i>
                                    <strong>Funding</strong><br>
                                    <small class="text-muted">Raise capital, find investors</small>
                                </label>
                                
                                <input type="radio" class="btn-check" name="goal_type" id="partnership" value="partnership">
                                <label class="btn btn-outline-primary text-start" for="partnership">
                                    <i class="bi bi-handshake me-2"></i>
                                    <strong>Partnership</strong><br>
                                    <small class="text-muted">Strategic partnerships, collaborations</small>
                                </label>
                                
                                <input type="radio" class="btn-check" name="goal_type" id="hiring" value="hiring">
                                <label class="btn btn-outline-primary text-start" for="hiring">
                                    <i class="bi bi-people me-2"></i>
                                    <strong>Hiring</strong><br>
                                    <small class="text-muted">Find talent, build your team</small>
                                </label>
                                
                                <input type="radio" class="btn-check" name="goal_type" id="customers" value="customers">
                                <label class="btn btn-outline-primary text-start" for="customers">
                                    <i class="bi bi-person-check me-2"></i>
                                    <strong>Customers</strong><br>
                                    <small class="text-muted">Find customers, market validation</small>
                                </label>
                                
                                <input type="radio" class="btn-check" name="goal_type" id="mentorship" value="mentorship">
                                <label class="btn btn-outline-primary text-start" for="mentorship">
                                    <i class="bi bi-mortarboard me-2"></i>
                                    <strong>Mentorship</strong><br>
                                    <small class="text-muted">Find advisors, mentors, guidance</small>
                                </label>
                                
                                <input type="radio" class="btn-check" name="goal_type" id="other" value="other">
                                <label class="btn btn-outline-primary text-start" for="other">
                                    <i class="bi bi-plus-circle me-2"></i>
                                    <strong>Other</strong><br>
                                    <small class="text-muted">Custom networking goal</small>
                                </label>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="timeline" class="form-label">Timeline</label>
                            <select class="form-select" id="timeline" name="timeline">
                                <option value="">Select timeline</option>
                                <option value="urgent">Urgent (1-2 weeks)</option>
                                <option value="short">Short-term (1-3 months)</option>
                                <option value="medium" selected>Medium-term (3-6 months)</option>
                                <option value="long">Long-term (6+ months)</option>
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label for="priority" class="form-label">Priority Level</label>
                            <select class="form-select" id="priority" name="priority">
                                <option value="low">Low</option>
                                <option value="medium" selected>Medium</option>
                                <option value="high">High</option>
                                <option value="critical">Critical</option>
                            </select>
                        </div>
                        
                        <div class="mb-4">
                            <label for="target_profile" class="form-label">Target Profile</label>
                            <textarea class="form-control" id="target_profile" name="target_profile" rows="3"
                                      placeholder="Describe your ideal contact profile: industry, role, company size, experience level, location, etc."></textarea>
                            <div class="form-text">Help AI match you with the right type of contacts</div>
                        </div>
                    </div>
                </div>
                
                <div class="d-grid gap-2 mt-3">
                    <button type="submit" class="btn btn-primary btn-lg">
                        <i class="bi bi-target me-2"></i>
                        Create Goal
                    </button>
                    <button type="button" class="btn btn-outline-secondary" onclick="window.history.back()">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Quick action buttons -->
<div class="position-fixed bottom-0 end-0 p-3" style="z-index: 1000;">
    <button class="btn btn-secondary btn-floating me-2" onclick="fillSampleGoal()" title="Fill Sample Goal">
        <i class="bi bi-lightning"></i>
    </button>
</div>

<script>
function fillSampleGoal() {
    document.getElementById('title').value = 'Raise Series A Funding';
    document.getElementById('description').value = 'Looking to raise $5M Series A to scale our AI-powered customer service platform. We have strong product-market fit with 50+ enterprise customers and $2M ARR. Seeking lead investor and strategic partners in the enterprise software space.';
    document.getElementById('funding').checked = true;
    document.getElementById('timeline').value = 'medium';
    document.getElementById('priority').value = 'high';
    document.getElementById('target_profile').value = 'Series A investors focused on B2B SaaS, enterprise software VCs, angels with enterprise sales experience, founders who have raised Series A successfully in similar space.';
}

// Auto-save form data to localStorage
document.addEventListener('DOMContentLoaded', function() {
    const form = document.querySelector('form');
    const inputs = form.querySelectorAll('input, textarea, select');
    
    // Load saved data
    inputs.forEach(input => {
        const saved = localStorage.getItem(`goal_form_${input.name}`);
        if (saved && !input.value) {
            if (input.type === 'radio') {
                if (input.value === saved) {
                    input.checked = true;
                }
            } else {
                input.value = saved;
            }
        }
    });
    
    // Save data on change
    inputs.forEach(input => {
        input.addEventListener('input', function() {
            if (input.type === 'radio') {
                if (input.checked) {
                    localStorage.setItem(`goal_form_${input.name}`, input.value);
                }
            } else {
                localStorage.setItem(`goal_form_${input.name}`, input.value);
            }
        });
        
        input.addEventListener('change', function() {
            if (input.type === 'radio') {
                if (input.checked) {
                    localStorage.setItem(`goal_form_${input.name}`, input.value);
                }
            } else {
                localStorage.setItem(`goal_form_${input.name}`, input.value);
            }
        });
    });
    
    // Clear saved data on successful submit
    form.addEventListener('submit', function() {
        inputs.forEach(input => {
            localStorage.removeItem(`goal_form_${input.name}`);
        });
    });
});
</script>
{% endblock %}